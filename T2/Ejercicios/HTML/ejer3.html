<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Ciudades y Habitantes</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        ul {
            list-style-type: none;
            padding: 0;
        }

        li {
            margin: 5px 0;
        }

        .rojo {
            color: red;
            font-weight: bold;
        }

        .verde {
            color: green;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <h2>Gesti√≥n de Ciudades</h2>

    <ul id="listaCiudades"></ul>

    <hr>
    <button onclick="mostrarCiudades()">1Ô∏è‚É£ Ver todas las ciudades</button>
    <button onclick="contarCiudades()">2Ô∏è‚É£ Cu√°ntas ciudades hay</button>
    <button onclick="borrarCiudad()">3Ô∏è‚É£ Borrar ciudad</button>
    <button onclick="a√±adirCiudad()">4Ô∏è‚É£ A√±adir ciudad</button>
    <button onclick="mostrarMayor()">5Ô∏è‚É£ Ciudad con m√°s habitantes</button>
    <button onclick="mostrarMenor()">6Ô∏è‚É£ Ciudad con menos habitantes</button>

    <p id="info"></p>

    <script>
        "use strict"; // obliga a declarar las variables correctamente

        // üîπ 1. JSON inicial con ciudades (clave ‚Üí valor)
        const ciudadesJSON = {
            "Madrid": 3223000,
            "Barcelona": 1620000,
            "Valencia": 791000,
            "Sevilla": 684000,
            "Zaragoza": 664000
        };

        // üîπ 2. Convertimos el JSON en un Map (clave, valor)
        let ciudadesMap = new Map(Object.entries(ciudadesJSON));

        // üîπ 3. Funci√≥n para mostrar todas las ciudades
        function mostrarCiudades() {
            const lista = document.getElementById("listaCiudades"); // Buscamos el <ul> del HTML
            lista.innerHTML = ""; // Limpiamos la lista antes de volver a dibujarla
            // Recorremos el Map y creamos un <li> por cada ciudad
            ciudadesMap.forEach((habitantes, ciudad) => {
                const li = document.createElement("li"); // Creamos el elemento de la lista
                li.textContent = `${ciudad}: ${habitantes} habitantes`; // Le ponemos el texto
                lista.appendChild(li); // Lo a√±adimos al <ul>
            });
            document.getElementById("info").textContent = ""; // Limpiamos cualquier mensaje previo
        }

        // üîπ 4. Funci√≥n para contar cu√°ntas ciudades hay
        function contarCiudades() {
            document.getElementById("info").textContent =
                `Hay ${ciudadesMap.size} ciudades registradas.`; // Map.size devuelve la cantidad de entradas
        }

        // üîπ 5. Funci√≥n para borrar una ciudad
        function borrarCiudad() {
            const nombre = prompt("Introduce el nombre de la ciudad a borrar:"); // Pedimos el nombre
            if (ciudadesMap.has(nombre)) { // Comprobamos si existe
                ciudadesMap.delete(nombre); // La borramos
                alert(`Se borr√≥ ${nombre}.`); // Mensaje de confirmaci√≥n
                mostrarCiudades(); // Actualizamos la lista
            } else {
                alert("Esa ciudad no existe."); // Mensaje si no la encuentra
            }
        }

        // üîπ 6. Funci√≥n para a√±adir una nueva ciudad
        function a√±adirCiudad() {
            const nombre = prompt("Introduce el nombre de la nueva ciudad:"); // Nombre de ciudad
            const habitantes = parseInt(prompt("Introduce la cantidad de habitantes:")); // Habitantes como n√∫mero
            if (nombre && !isNaN(habitantes)) { // Comprobamos que sean datos v√°lidos
                ciudadesMap.set(nombre, habitantes); // A√±adimos al Map
                alert(`Ciudad ${nombre} a√±adida correctamente.`); // Confirmaci√≥n
                mostrarCiudades(); // Actualizamos la lista
            } else {
                alert("Datos inv√°lidos."); // Si algo est√° mal
            }
        }

        // üîπ 7. Funci√≥n para mostrar la ciudad con m√°s habitantes
        function mostrarMayor() {
            let maxHab = -Infinity; // Inicializamos el m√°ximo con -infinito para que cualquier ciudad lo supere
            let ciudadMax = ""; // Guardaremos el nombre de la ciudad m√°s poblada
            // Recorremos el Map para buscar la ciudad con m√°s habitantes
            ciudadesMap.forEach((habitantes, ciudad) => {
                if (habitantes > maxHab) { // Si encontramos una ciudad m√°s poblada
                    maxHab = habitantes; // Actualizamos el m√°ximo
                    ciudadMax = ciudad; // Guardamos el nombre
                }
            });
            resaltar(ciudadMax, "rojo"); // Llamamos a resaltar en rojo la ciudad m√°s poblada
        }

        // üîπ 8. Funci√≥n para mostrar la ciudad con menos habitantes
        function mostrarMenor() {
            let minHab = Infinity; // Inicializamos el m√≠nimo con infinito para que cualquier ciudad lo supere
            let ciudadMin = ""; // Guardaremos el nombre de la ciudad menos poblada
            // Recorremos el Map para buscar la ciudad con menos habitantes
            ciudadesMap.forEach((habitantes, ciudad) => {
                if (habitantes < minHab) { // Si encontramos una ciudad menos poblada
                    minHab = habitantes; // Actualizamos el m√≠nimo
                    ciudadMin = ciudad; // Guardamos el nombre
                }
            });
            resaltar(ciudadMin, "verde"); // Llamamos a resaltar en verde la ciudad menos poblada
        }

        // üîπ 9. Funci√≥n para resaltar una ciudad concreta
        function resaltar(nombre, claseColor) {
            const lista = document.getElementById("listaCiudades"); // Buscamos la lista en HTML
            lista.innerHTML = ""; // Limpiamos antes de dibujar
            // Recorremos todas las ciudades y creamos los <li>
            ciudadesMap.forEach((habitantes, ciudad) => {
                const li = document.createElement("li"); // Creamos elemento de lista
                li.textContent = `${ciudad}: ${habitantes} habitantes`; // Le ponemos texto
                if (ciudad === nombre) { // Si es la ciudad que queremos resaltar
                    li.classList.add(claseColor); // Le ponemos la clase CSS (rojo o verde)
                }
                lista.appendChild(li); // Lo a√±adimos a la lista
            });

            // Mostramos mensaje explicando cu√°l ciudad se resalt√≥
            const mensaje =
                claseColor === "rojo"
                    ? `La ciudad m√°s poblada es ${nombre}.`
                    : `La ciudad menos poblada es ${nombre}.`;
            document.getElementById("info").textContent = mensaje;
        }
    </script>
</body>

</html>